@Kopernicus:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:AFTER[Kopernicus]
{
	// *****************************delete the Sun (Kerbol)*****************************
	!Body[Sun] {}
	
	// *****************************delete Kcalbeloh*****************************
	!Body[Kcalbeloh] {}

	// *****************************create a new Kcalbeloh as Sun*****************************
	Body
	{
		name = Sun
		identifier = KcalbelohSystem/KcalbelohCenter
		cacheFile = KcalbelohSystem/cache/KcalbelohCenter.bin
		Tag = Kcalbeloh
		finalizeOrbit = false
		Template
		{
			name = Sun
		}
		Properties
		{
			description = #LOC_KS_Kcalbeloh_description
			radius = 1750000 //3500000 // 3000000//
			mass = 1.178305E+31 //2.35661E+31 //2.019951E+31 //
			//sphereOfInfluence = 2E13
			displayName = #LOC_KS_name_Kcalbeloh
			maxZoom = 1.2E10
			timewarpAltitudeLimits = 5.0E8, 1.0E9, 2.5E9, 4.0E9, 4.5E9, 5.0E9, 5.40E9, 6.0E9
			ScienceValues
			{
				flyingLowDataValue = 500
				flyingHighDataValue = 200
				inSpaceLowDataValue = 50
				inSpaceHighDataValue = 10
				recoveryValue = 20
				flyingAltitudeThreshold = 7E9
				spaceAltitudeThreshold = 2.5E+10
			}
		}
		HazardousBody
		{
			Item
			{
				ambientTemp = 10000
				AltitudeCurve
				{
					key = 5.00E+08 1.00 0.00E+00 -3.33E-10
					key = 1.00E+09 0.80 -3.33E-10 -2.33E-10
					key = 2.00E+09 0.60 -2.33E-10 -2.20E-10
					key = 3.00E+09 0.30 -2.20E-10 -5.33E-11
					key = 3.50E+09 0.27 -5.33E-11 -3.67E-11
					key = 4.00E+09 0.25 -3.67E-11 -2.44E-11
					key = 5.00E+09 0.22 -2.44E-11 -2.67E-11
					key = 6.50E+09 0.20 -2.67E-11 -5.56E-11
					key = 8.00E+09 0.12 -5.56E-11 -6.00E-11
					key = 9.00E+09 0.06 -6.00E-11 -4.00E-11
					key = 1.00E+10 0.00 -4.00E-11 0.00E+00
				}
			}
		}
		ScaledVersion
		{
			Light
			{
				sunlightColor = 1,1,1,1
				scaledSunlightColor = 1,1,1,1
				IVASunColor = 1,1,1,1
				sunLensFlareColor = 0,0,0,1
				luminosity = 1920
				sunAU = 5.6E10
				IntensityCurve
				{
					key = 1.500E+10 1.944 -1.143E-10 -1.143E-10
					key = 2.000E+10 1.474 -7.711E-11 -7.711E-11
					key = 2.500E+10 1.149 -5.465E-11 -5.465E-11
					key = 3.000E+10 0.915 -3.997E-11 -3.997E-11
					key = 3.500E+10 0.742 -2.993E-11 -2.993E-11
					key = 4.000E+10 0.611 -2.285E-11 -2.285E-11
					key = 4.500E+10 0.510 -1.776E-11 -1.776E-11
					key = 5.000E+10 0.431 -1.401E-11 -1.401E-11
					key = 5.500E+10 0.368 -1.120E-11 -1.120E-11
					key = 6.000E+10 0.318 -9.077E-12 -9.077E-12
					key = 8.000E+10 0.191 -4.347E-12 -4.347E-12
					key = 1.001E+11 0.126 -2.367E-12 -2.367E-12
					key = 2.000E+11 0.033 -3.258E-13 -3.258E-13
					key = 3.000E+11 0.015 -9.832E-14 -9.832E-14
					key = 6.000E+11 0.004 -1.243E-14 -1.243E-14
					key = 1.000E+12 0.001 -2.691E-15 -2.691E-15
					key = 2.000E+12 0.000 0.000 0.000
				}
				ScaledIntensityCurve
				{
					key = 2.50E+06 1.944 -6.85506E-07 -6.85506E-07
					key = 3.33E+06 1.474 -4.62632E-07 -4.62632E-07
					key = 4.17E+06 1.149 -3.2788E-07 -3.2788E-07
					key = 5.00E+06 0.915 -2.39796E-07 -2.39796E-07
					key = 5.83E+06 0.742 -1.79568E-07 -1.79568E-07
					key = 6.67E+06 0.611 -1.3713E-07 -1.3713E-07
					key = 7.50E+06 0.510 -1.06531E-07 -1.06531E-07
					key = 8.33E+06 0.431 -8.40396E-08 -8.40396E-08
					key = 9.17E+06 0.368 -6.72257E-08 -6.72257E-08
					key = 1.00E+07 0.318 -5.44611E-08 -5.44611E-08
					key = 1.33E+07 0.191 -2.60832E-08 -2.60832E-08
					key = 1.67E+07 0.126 -1.41997E-08 -1.41997E-08
					key = 3.33E+07 0.033 -1.95486E-09 -1.95486E-09
					key = 5.00E+07 0.015 -5.89895E-10 -5.89895E-10
					key = 1.00E+08 0.004 -7.45616E-11 -7.45616E-11
					key = 1.67E+08 0.001 -1.61438E-11 -1.61438E-11
					key = 3.33E+08 0.000 -2.02002E-12 -2.02002E-12
				}
				IVAIntensityCurve
				{
					key = 1.500E+10 1.944 -1.143E-10 -1.143E-10
					key = 2.000E+10 1.474 -7.711E-11 -7.711E-11
					key = 2.500E+10 1.149 -5.465E-11 -5.465E-11
					key = 3.000E+10 0.915 -3.997E-11 -3.997E-11
					key = 3.500E+10 0.742 -2.993E-11 -2.993E-11
					key = 4.000E+10 0.611 -2.285E-11 -2.285E-11
					key = 4.500E+10 0.510 -1.776E-11 -1.776E-11
					key = 5.000E+10 0.431 -1.401E-11 -1.401E-11
					key = 5.500E+10 0.368 -1.120E-11 -1.120E-11
					key = 6.000E+10 0.318 -9.077E-12 -9.077E-12
					key = 8.000E+10 0.191 -4.347E-12 -4.347E-12
					key = 1.001E+11 0.126 -2.367E-12 -2.367E-12
					key = 2.000E+11 0.033 -3.258E-13 -3.258E-13
					key = 3.000E+11 0.015 -9.832E-14 -9.832E-14
					key = 6.000E+11 0.004 -1.243E-14 -1.243E-14
					key = 1.000E+12 0.001 -2.691E-15 -2.691E-15
					key = 2.000E+12 0.000 0.000 0.000
				}
				brightnessCurve
				{
					key = 0 0
					key = 200 0
				}
			}

			Material
			{
				emitColor0 = 0,0,0,1
				emitColor1 = 0,0,0,1
				sunspotColor = 0,0,0,1
				rimColor = 0,0,0,1
				rimPower = 1.29
				rimBlend = 2.5
			}

			Coronas
			{
				Corona
				{
					Material
					{
						texture = KcalbelohSystem/PluginData/Black.png
					}
				}
			}
		}
		
		
	}
	
	// *****************************create a new Kerbol*****************************
	Body
	{
		name = Kerbol
		identifier = KcalbelohSystem/Kerbol
		cacheFile = KcalbelohSystem/cache/Kerbol.bin
		finalizeOrbit = False
		Template
		{
			name = Sun 
		}
		Properties
		{
			description = #autoLOC_910002
			radius = 261600000
			mass = 1.75654591319326E+28
			rotates = True
			rotationPeriod = 432000
			tidallyLocked = False
			initialRotation = 0
			inverseRotThresholdAltitude = 600000
			timewarpAltitudeLimits = 0 3270000 3270000 6540000 1.308E+07 2.616E+07 5.232E+07 6.54E+07
			displayName = Kerbol^N
			maxZoom = 60000
			ScienceValues
			{
				landedDataValue = 1 // Science multiplier for landed science.
				splashedDataValue = 1 // Science multiplier for splashed down science.
				flyingLowDataValue = 1 // Science multiplier for flying low science.
				flyingHighDataValue = 1 // Science multiplier for flying high science.
				inSpaceLowDataValue = 11 // Science multiplier for in space low science.
				inSpaceHighDataValue = 2 // Science multiplier for in space high science.
				recoveryValue = 4
				flyingAltitudeThreshold = 18000 // Altitude when "flying at <body>" transitions from/to "from <body>'s upper atmosphere"
				spaceAltitudeThreshold = 1E+09 // Altitude when "in space low" transitions from/to "in space high"
			}
		}
		Orbit
		{
			referenceBody = Sun
			color = 0.6,0.55,0.5,1
			nodeColor = 1,0.95,0.9,1
			inclination = -5
			eccentricity = 0.01
			semiMajorAxis = 7.188815E12
			longitudeOfAscendingNode = 135
			argumentOfPeriapsis = 90
			meanAnomalyAtEpoch = 0
			iconTexture = KcalbelohSystem/PluginData/Decals/star.png
		}
		ScaledVersion
		{
			type = Star
			sphericalModel = false
			deferMesh = false
			Light
			{
				sunlightColor = 1,1,1,1 // The color of the LocalSpace starlight. Influences vessels and PQS terrain.
				sunlightShadowStrength = 0.7523364 // The strength of the shadows caused by LocalSpace starlight.
				scaledSunlightColor = 1,1,1,1 // The color of the ScaledSpace starlight. Influences the ScaledSpace representation of the bodies.
				IVASunColor = 1,0.976999998,0.896000028,1 // The color of the starlight in IVA view.
				ambientLightColor = 0.0599999987,0.0599999987,0.0599999987,1 // The color of ambient lighting when orbiting near the star.
				sunLensFlareColor = 1,1,1,1 // The color of the stars LensFlare effect. Gets multiplied with the color of the base texture (yellow-ish for stock flare).
				givesOffLight = True // Whether the star should emit light and have a LensFlare effect.
				sunAU = 13599840256 // TODO
				luminosity = 1360 // TODO
				insolation = 0.15 // TODO
				radiationFactor = 1 // TODO
				brightnessCurve // Associates a distance value with a multiplier for the brightness of the LensFlare effect.
				{
					key = 0 0.00 0 2.2 // "1/0" infnitely far
					key = 0.1 0.19 0.9 0.9
					key = 1 1 0.9 0.9 // Kerbin's position, 1 AU
					key = 5 3 0.25 0.25
					key = 14 4 0 0 // "1/14" really close
					key = 60 2 0 0 // "1/60" the closest distance you choose to support
				}
				IntensityCurve
				{ 
					key = 1.000E+09 1.265 -1.076E-10 -1.076E-10
					key = 2.000E+09 1.191 -5.221E-11 -5.221E-11
					key = 4.000E+09 1.120 -2.526E-11 -2.526E-11
					key = 5.263E+09 1.092 -1.894E-11 -1.894E-11
					key = 9.833E+09 1.031 -9.815E-12 -9.815E-12
					key = 1.360E+10 1.000 -6.972E-12 -6.972E-12
					key = 2.073E+10 0.961 -4.468E-12 -4.468E-12
					key = 4.084E+10 0.899 -2.178E-12 -2.178E-12
					key = 6.877E+10 0.853 -1.252E-12 -1.252E-12
					key = 9.012E+10 0.830 -9.389E-13 -9.389E-13
					key = 1.001E+11 0.821 -8.393E-13 -8.393E-13
					key = 2.000E+11 0.765 -4.009E-13 -4.009E-13
					key = 3.000E+11 0.733 -2.597E-13 -2.597E-13
					key = 6.000E+11 0.680 -1.233E-13 -8.497E-13
					key = 1.000E+12 0.340 -8.497E-13 -1.700E-13
					key = 2.000E+12 0.170 -1.700E-13 -4.500E-14
					key = 4.000E+12 0.080 -4.500E-14 -1.000E-14
					key = 8.000E+12 0.040 -1.000E-14 -2.000E-14
					key = 1.000E+13 0.000 -2.000E-14 0.000E+00
				}
				ScaledIntensityCurve
				{
					key = 1.67E+05 1.265 -6.45885E-07 -6.45885E-07
					key = 3.33E+05 1.191 -3.13251E-07 -3.13251E-07
					key = 6.67E+05 1.120 -1.51579E-07 -1.51579E-07
					key = 8.77E+05 1.092 -1.13642E-07 -1.13642E-07
					key = 1.64E+06 1.031 -5.88877E-08 -5.88877E-08
					key = 2.27E+06 1.000 -4.18320E-08 -4.18320E-08
					key = 3.45E+06 0.961 -2.68055E-08 -2.68055E-08
					key = 6.81E+06 0.899 -1.30683E-08 -1.30683E-08
					key = 1.15E+07 0.853 -7.51168E-09 -7.51168E-09
					key = 1.50E+07 0.830 -5.63318E-09 -5.63318E-09
					key = 1.67E+07 0.821 -5.03561E-09 -5.03561E-09
					key = 3.33E+07 0.765 -2.40510E-09 -2.40510E-09
					key = 5.00E+07 0.733 -1.55792E-09 -1.55792E-09
					key = 1.00E+08 0.680 -7.39986E-10 -5.09826E-09
					key = 1.67E+08 0.340 -5.09826E-09 -1.02000E-09
					key = 3.33E+08 0.170 -1.02000E-09 -2.70000E-10
					key = 6.67E+08 0.080 -2.70000E-10 -6.00000E-11
					key = 1.33E+09 0.040 -6.00000E-11 -1.20000E-10
					key = 1.67E+09 0.000 -1.20000E-10 0.00000E+00
				}
				IVAIntensityCurve
				{ 
					key = 1.000E+09 1.265 -1.076E-10 -1.076E-10
					key = 2.000E+09 1.191 -5.221E-11 -5.221E-11
					key = 4.000E+09 1.120 -2.526E-11 -2.526E-11
					key = 5.263E+09 1.092 -1.894E-11 -1.894E-11
					key = 9.833E+09 1.031 -9.815E-12 -9.815E-12
					key = 1.360E+10 1.000 -6.972E-12 -6.972E-12
					key = 2.073E+10 0.961 -4.468E-12 -4.468E-12
					key = 4.084E+10 0.899 -2.178E-12 -2.178E-12
					key = 6.877E+10 0.853 -1.252E-12 -1.252E-12
					key = 9.012E+10 0.830 -9.389E-13 -9.389E-13
					key = 1.001E+11 0.821 -8.393E-13 -8.393E-13
					key = 2.000E+11 0.765 -4.009E-13 -4.009E-13
					key = 3.000E+11 0.733 -2.597E-13 -2.597E-13
					key = 6.000E+11 0.680 -1.233E-13 -8.497E-13
					key = 1.000E+12 0.340 -8.497E-13 -1.700E-13
					key = 2.000E+12 0.170 -1.700E-13 -4.500E-14
					key = 4.000E+12 0.080 -4.500E-14 -1.000E-14
					key = 8.000E+12 0.040 -1.000E-14 -2.000E-14
					key = 1.000E+13 0.000 -2.000E-14 0.000E+00
				}
			}
			Material
			{
				emitColor0 = 1,0.816042185,0.506993055,1
				emitColor1 = 0.925373137,0.773156404,0.287965715,1
				sunspotTex = BUILTIN/sunsurfacenew
				sunspotPower = 1
				sunspotColor = 0.283582091,0.126710668,0.0208224356,1
				rimColor = 1,0.863375425,0.583916068,1
				rimPower = 1.29
				rimBlend = 2.5
			}
			Coronas
			{
				Value
				{
					scaleSpeed = 0.007
					scaleLimitY = 5
					scaleLimitX = 5
					updateInterval = 5
					speed = -1
					rotation = 0
					Material
					{
						texture = BUILTIN/suncoronanew
						mainTexScale = 1,1
						mainTexOffset = 0,0
						invFade = 2.553731
					}
				}
				Value
				{
					scaleSpeed = 0.009
					scaleLimitY = 5
					scaleLimitX = 5
					updateInterval = 5
					speed = 1
					rotation = 0
					Material
					{
						texture = BUILTIN/suncoronanew
						mainTexScale = 1,1
						mainTexOffset = 0,0
						invFade = 2.553731
					}
				}
			}
		}
		Atmosphere
		{
			enabled = True // Whether the body has an atmosphere.
			oxygen = False // Whether the atmosphere contains oxygen.
			staticDensityASL = 0.00072492861572823 // Atmospheric density at sea level. Used to calculate the parameters of the atmosphere if no curves are used.
			adiabaticIndex = 1.42999994754791
			atmosphereDepth = 600000 // The height of the atmosphere.
			gasMassLapseRate = 0.465695397616382
			atmosphereMolarMass = 0.00219999998807907
			pressureCurveIsNormalized = False // Whether the pressure curve should use absolute (0 - atmosphereDepth) or relative (0 - 1) values.
			staticPressureASL = 16 // The static pressure at sea level. Used to calculate the parameters of the atmosphere if no curves are used.
			temperatureCurveIsNormalized = False // Whether the temperature curve should use absolute (0 - atmosphereDepth) or relative (0 - 1) values.
			temperatureLapseRate = 0.00973333333333333
			temperatureSeaLevel = 5840 // The static temperature at sea level. Used to calculate the parameters of the atmosphere if no curves are used.
			ambientColor = 0,0,0,0 // All objects inside of the atmosphere will slightly shine in this color.
			addAFG = True
			pressureCurve // Assigns a pressure value to a height value inside of the atmosphere.
			{
				key = 0 16 0 0
				key = 5000 8.3 -0.001532 -0.001532
				key = 10000 0.68 -0.001178053 -0.001178053
				key = 10753.09 0.300954 -2.96097E-05 -2.96097E-05
				key = 14194.01 0.2613179 -8.41565E-07 -8.41565E-07
				key = 350000 0.1 -7.49481E-07 -7.49481E-07
				key = 400000 0.04 -7.05211E-07 -7.05211E-07
				key = 590000 2E-05 -6.21053E-09 -6.21053E-09
				key = 600000 0 0 0
			}
			temperatureCurve // Assigns a temperature value to a height value inside of the atmosphere.
			{
				key = 0 5840 0 -0.2780258
				key = 10000 4465 -0.01447884 -0.01447884
				key = 50000 4000 -0.007179292 0.003853968
				key = 250000 5800 0.0009989792 0.0009989792
				key = 500000 6000 0.001352723 0.001352723
				key = 600000 10000 0.06371323 0
			}
			temperatureSunMultCurve
			{
				key = 0 0 0 0
			}
			temperatureLatitudeBiasCurve
			{
				key = 0 0 0 0
			}
			temperatureLatitudeSunMultCurve
			{
				key = 0 0 0 0
			}
			temperatureAxialSunBiasCurve
			{
				key = 0 0 0 0
			}
			temperatureAxialSunMultCurve
			{
				key = 0 0 0 0
			}
			temperatureEccentricityBiasCurve
			{
				key = 0 0 0 0
			}
		}
		
	}

	// *****************************edit orbit around Kerbol*****************************
	@Body[Moho]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Eve]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Kerbin]
	{
		@Orbit
		{
			%referenceBody = Sun
		}
		PostSpawnOrbit
		{
			referenceBody = Kerbol
		}
	}
	@Body[Duna]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Dres]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Jool]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Eeloo]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	// *****************************edit orbit around Kcalbeloh*****************************
	@Body[Onrefni]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[Rouqea]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[Iomena]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[Uleg]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[Maelg]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[Sunorc]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}
	@Body[AralcA]
	{
		@Orbit
		{
			@referenceBody = Sun
		}
	}


	// *****************************Edit asteroids*****************************
	!Asteroid[Stock]{}

	@Asteroid[AccretionDisk]
	{
		@Locations
		{
			@Around
			{
				@Body
				{
					@body = Sun
				}
			}
		}
	}

}

@Kopernicus:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],#HomeSwitchEnabled[?rue]]]:AFTER[ModularFlightIntegrator]
{
	@Body[Kerbol]
	{
		!Orbit{}
		Orbit
		{
			referenceBody = Sun
			color = 0.6,0.55,0.5,1
			nodeColor = 1,0.95,0.9,1
			inclination = -5
			eccentricity = 0.01
			semiMajorAxis = 7.188815E12
			longitudeOfAscendingNode = 135
			argumentOfPeriapsis = 90
			meanAnomalyAtEpoch = 0
			iconTexture = KcalbelohSystem/PluginData/Decals/star.png
		}
	}
}

@Kopernicus:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:AFTER[OPM]
{
	@Body[Sarnus]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Urlum]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Neidon]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
	@Body[Plock]
	{
		@Orbit
		{
			@referenceBody = Kerbol
		}
	}
}



// *****************************Scatterer*****************************
@Scatterer_planetsList:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:LAST[KcalbelohSystem]
{
	@scattererCelestialBodies
	{
		@Item:HAS[#mainSunCelestialBody[Sun]]
		{
			@mainSunCelestialBody = Kerbol
		}
		
	}
}

@Scatterer_planetsList:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:LAST[Scatterer]
{
	@scattererCelestialBodies
	{
		@Item:HAS[#mainSunCelestialBody[Kcalbeloh]]
		{
			@mainSunCelestialBody = Sun
		}
		
	}
}

@Scatterer_sunflare:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:LAST[KcalbelohSystem]
{
	@Sun
	{
		|_ = Kerbol
	}
}

// *****************************Singularity*****************************
@Singularity:HAS[@KcalbelohSystemSettings:HAS[#DistanceFactor[0],~HomeSwitchEnabled[?rue]]]:LAST[KcalbelohSystem]
{
	@Singularity_object:HAS[#name[Kcalbeloh]]
	{
		@name = Sun
	}
}